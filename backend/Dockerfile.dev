# Development Dockerfile for Rust backend with hot reload
FROM rust:1.92-alpine

RUN apk add --no-cache musl-dev openssl-dev openssl-libs-static pkgconf postgresql-client

# Install cargo-watch for hot reload
RUN cargo install cargo-watch

WORKDIR /app/src

# Create upload directory
RUN mkdir -p /data/uploads

EXPOSE 8080

# Default command (can be overridden in docker-compose)
CMD ["cargo", "watch", "-x", "run --bin api-server"]
